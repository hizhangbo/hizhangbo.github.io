<!DOCTYPE HTML><title>Bob’s Blog</title><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /> <!--[if lte IE 8]><script src="https://cdn.bootcss.com/html5shiv/3.6.2/html5shiv.js"></script><![endif]--><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/hizhangbo/hizhangbo.github.io@v0.1/assets/css/main.css" /> <!--[if lte IE 9]><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/hizhangbo/hizhangbo.github.io@v0.1/assets/css/ie9.css" /><![endif]--> <!--[if lte IE 8]><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/hizhangbo/hizhangbo.github.io@v0.1/assets/css/ie8.css" /><![endif]--> <script> var _hmt = _hmt || []; (function() { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?62888767648ab0a78f7107ed1f6dc242"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s); })(); </script> <script src='//unpkg.com/valine/dist/Valine.min.js'></script><body oncontextmenu="return false;" onselectstart="return false"><div id="wrapper"><header id="header"><h1><a href="/index.html">記憶 備份</a></h1><nav class="links"><ul><li><a href="/#about">關於我</a></ul></nav><nav class="main"><ul><li class="light"> <input type="checkbox" class="checke"><li class="menu"> <a class="fa-bars" href="#menu">Menu</a></ul></nav></header><section id="menu"><section> <form class="search" method="get" action="#"> <input type="text" name="query" placeholder="Search" id="search-input" /> </form></section><section><div id="results-container"></div></section></section><div id="main"><article class="post"><h1 id="spring">Spring</h1><hr /><h3 id="源碼編譯">源碼編譯</h3><ul><li>Within your locally cloned spring-framework working directory:<ul><li>Precompile spring-oxm with ./gradlew :spring-oxm:compileTestJava<li>Import into IntelliJ (File -&gt; New -&gt; Project from Existing Sources -&gt; Navigate to directory -&gt; Select build.gradle)<li>When prompted exclude the spring-aspects module (or after the import via File-&gt; Project Structure -&gt; Modules)<li>Code away</ul><li>gradle<ul><li>修改構建文件 <code class="highlighter-rouge">build.gradle</code><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>repositories {
       maven { url "https://repo.spring.io/libs-release" }
       maven{ url 'http://maven.aliyun.com/nexus/content/groups/public/'}
       google()
 } 
</code></pre></div></div></ul></ul><h3 id="ioc容器">IoC容器</h3><ul><li>定义<ul><li>inversion of control (控制反转)</ul><li>实现<ul><li>service locator pattern 服务定位JNDI<li>template method design pattern 模板方法<li>strategy design pattern 策略模式<li>contextualized lookup 依赖查找<li>dependency injection 依赖注入</ul><li>职责<ul><li>依赖处理<li>生命周期管理<ul><li>容器<li>托管资源</ul><li>配置<ul><li>容器<li>外部化配置<li>托管资源</ul></ul><li>依赖来源<ul><li>自定义 Bean<li>容器内建Bean对象<li>容器内建依赖</ul><li>配置元信息<ul><li>Bean 定义配置<ul><li>XML 文件<li>Properties 文件<li>Java 注解<li>Java API</ul><li>IoC 容器配置<ul><li>XML<li>Java 注解<li>Java API</ul><li>外部化属性配置<ul><li>Java 注解</ul></ul><li>对比</ul><p>|类型|依赖处理|实现便利性|代码侵入性|API依赖性|可读性| |—|—|—|—|—|—| |依赖查找|主动获取|相对繁琐|侵入业务逻辑|依赖容器API|良好| |依赖注入|被动提供|相对便利|低侵入性|不依赖容器API|一般|</p><ul><li>依赖查找<ul><li>来源<ul><li>BeanDefinition<li>SingletonObjects</ul><li>方式<ul><li>名称<li>类型<li>注解</ul></ul><li>依赖注入<ul><li>来源<ul><li>BeanDefinition<li>SingletonObjects<li>Dependency<li>@Value</ul><li>方式<ul><li>Setter<li>Constructor<li>Field</ul><li>手动模式<ul><li>XML<li>注解<li>API配置元信息</ul><li>自动模式<ul><li>Autowiring 自动绑定</ul></ul><li>BeanFactory ApplicationContext<ul><li>BeanFactory 是 Spring底层 Ioc容器<li>ApplicationContext 是具备应用特性的 BeanFactory 超集<ul><li>AOP<li>Event publication<li>Message resource handling 国际化<li>WebApplicationContext</ul></ul></ul><h3 id="bean">Bean</h3><ul><li>BeanDefinition<ul><li><table><thead><tr><th>属性<th>说明<tbody><tr><td>Class<td>全类名，必须是具体类，不能用抽象类或接口<tr><td>Name<td>名称或ID<tr><td>Scope<td>作用域<tr><td>Constructor arguments<td>构造器参数<tr><td>Properties<td>属性设置<tr><td>Autowiring mode<td>自动绑定<tr><td>Lazy initialization mode<td>延迟初始化模式<tr><td>Initialization method<td>初始化回调方法名称<tr><td>Destruction method<td>销毁回调方法名称</table></ul><li>缓存<ul><li>singletonObjects 单例缓存池<li>singletonFactories 工厂-对象增强 AOP实现<li>earlySingletonObjects 三级缓存-防止重复创建</ul><li>生命周期（单例）<ul><li>xml/annotation 解析成 BeanDefinition<li>如果存在循环依赖 提前将对象暴露 addSingletonFactory<li>执行后置处理器(Aware接口/注解等) applyBeanPostProcessorsBeforeInitialization<ul><li>策略模式 调用BeanPostProcessor的postProcessBeforeInitialization</ul><li>反射创建对象<li>初始化对象<ul><li>存在循环依赖 为循环依赖提供代理对象 getSingletonFactory</ul><li>添加到单例对象缓存池 addSingletonObjects<li>关闭ApplicationContext destroyBeans</ul></ul><h3 id="注解">注解</h3><ul><li>注册组件<ul><li>包扫描<ul><li>@ComponentScan</ul><li>组件注解<ul><li>@Controller/@Service/@Repository/@Component</ul><li>导入方式<ul><li>@Bean<li>@Import<ul><li>ImportSelector<li>ImportBeanDefinitionRegistrar</ul><li>@Primary<li>@Conditional<li>@Lazy<li>@Scope<li>FactoryBean<ul><li>默认取得方法getObject创建的目标对象<li>&amp;beanName取得FactoryBean本身</ul></ul><li>组件赋值<ul><li>@Value<li>@Autowired<ul><li>@Qualifier</ul><li>@Resources (JSR250)<li>@Inject(JSR330,导入包javax.inject)<li>@PropertySource<li>@PropertySources<li>@Profile</ul><li>事件监听<ul><li>@EventListener</ul><li>Aop<ul><li>@EnableAspectJAutoProxy<li>@Aspect<li>@Pointcut<li>@Before/@After/@AfterReturning/@AfterThrowing/@Around</ul><li>Transaction<ul><li>@EnableTransactionManagement<li>@Transactional</ul></ul></ul><h3 id="webflux">WebFlux</h3><ul><li>相关前提<ul><li>Reactor 同步非阻塞模式<li>Proactor 异步非阻塞模式<li>Observer 观察者模式<li>Iterator 迭代器模式</ul><li>Reactive<ul><li>定义<ul><li>声明式的编程范式，关注于数据流（data streams）和传播变化（propagation of change）</ul><li>实现<ul><li>RxJava: Reactive Extensions<li>Reactor: Spring WebFlux Reactive<li>Flow API: JAVA 9 Flow API</ul><li>特点<ul><li>响应式（Responsive）<li>适应性强（Resilient）<li>弹性可伸缩（Elastic）<li>消息驱动（Message Driven）</ul><li>涉及技术<ul><li>数据流：Java 8 <code class="highlighter-rouge">Stream</code><li>传播变化： Java <code class="highlighter-rouge">Observable/Observer</code><li>事件： Java <code class="highlighter-rouge">EventObject/EventListener</code></ul><li>数据结构<ul><li>流式 <code class="highlighter-rouge">stream</code><li>序列 <code class="highlighter-rouge">Sequences</code><li>事件 <code class="highlighter-rouge">Events</code></ul><li>设计模式<ul><li>扩展模式：观察者 <code class="highlighter-rouge">Observer</code> -&gt; 推模式：被动获取事件<li>对立模式：迭代器 <code class="highlighter-rouge">Iterator</code> -&gt; 拉模式：主动获取事件<li>混合模式：反应堆 <code class="highlighter-rouge">Reactor</code>,<code class="highlighter-rouge">Proactor</code></ul></ul></ul></article><div id="vcomments"></div><ul class="actions pagination"><li><a title="Netty" href="/netty/2020/02/11/netty.html" class="button big previous">Previous</a><li><a title="Kafka" href="/2020/02/12/kafka.html" class="button big next">Next</a><li id="/spring/2020/02/11/spring.html" class="leancloud_visitors" style="float: right;"><a class="icon fa-eye leancloud-visitors-count" aria-hidden="true"></a></ul></div><script> new Valine({ el: '#vcomments' , appId: 'VDYHbJKU0wCisABJmYCE1jaY-gzGzoHsz', appKey: '1CSpcPFQ88n8LBW7SjpAbMIc', notify:false, verify:false, avatar:'mp', placeholder: '若有疏失，還望指正', visitor: true, recordIP: true }); </script></div><div id="leftsead"><ul><li class="top"> ↑<li class="bottom"> ↑</ul></div><script src="https://cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script> <script src="https://cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.min.js"></script> <script src="https://cdn.bootcss.com/skel/3.0.0/skel.min.js"></script> <!--[if lte IE 8]><script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script><![endif]--> <script src="https://cdn.jsdelivr.net/gh/hizhangbo/hizhangbo.github.io@v0.1/assets/js/main.js"></script> <script src="https://cdn.jsdelivr.net/gh/hizhangbo/hizhangbo.github.io@v0.1/assets/js/util.js"></script> <script src="https://cdn.jsdelivr.net/gh/hizhangbo/hizhangbo.github.io@v0.1/assets/js/search.js"></script> <script> new Valine({ el: '#vcomments', appId: 'VDYHbJKU0wCisABJmYCE1jaY-gzGzoHsz', appKey: '1CSpcPFQ88n8LBW7SjpAbMIc' }) </script>
